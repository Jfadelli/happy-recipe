{"ast":null,"code":"import _regeneratorRuntime from\"/home/jason/projects/happy-recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jason/projects/happy-recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useContext}from'react';import RecipeFinder from'../api/RecipeFinder';import{useHistory}from'react-router-dom';import{RecipesContext}from'../context/appContext';import StarRating from'../components/StarRating';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RecipesList=function RecipesList(props){var history=useHistory();var _useContext=useContext(RecipesContext),recipes=_useContext.recipes,setRecipes=_useContext.setRecipes;useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return RecipeFinder.get('/');case 3:response=_context.sent;setRecipes(response.data.data.recipeData);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[setRecipes]);var handleUpdate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.stopPropagation();history.push(\"/recipes/\".concat(id,\"/update\"));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUpdate(_x,_x2){return _ref2.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e,id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.stopPropagation();_context3.prev=1;_context3.next=4;return RecipeFinder.delete(\"/\".concat(id));case 4:setRecipes(recipes.filter(function(recipe){return recipe.id!==id;}));_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[1,7]]);}));return function handleDelete(_x3,_x4){return _ref3.apply(this,arguments);};}();var handleRecipeSelect=function handleRecipeSelect(id){history.push(\"/recipes/\".concat(id,\"/\"));};var renderRating=function renderRating(rating){if(rating<=0){return/*#__PURE__*/_jsx(\"span\",{className:\"text-warning\",children:\"Not Yet Rated\"});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(StarRating,{rating:rating})});};var priceStyle=function priceStyle(price){if(price<=2){return'green';}else if(price>2&&price<=4){return'yellow';}else{return'red';}};return/*#__PURE__*/_jsx(\"div\",{className:\"recipe-list\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover table-dark\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-primary\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Recipe\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Rating\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Edit\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:recipes&&recipes.map(function(el){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){handleRecipeSelect(el.id);},className:\"table-row\",children:[/*#__PURE__*/_jsx(\"td\",{children:el.name}),/*#__PURE__*/_jsx(\"td\",{children:renderRating(el.rating)}),/*#__PURE__*/_jsx(\"td\",{style:{color:priceStyle(el.price)},children:\"$\".repeat(el.price)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleUpdate(e,el.id);},className:\"btn btn-warning\",children:\"Edit\"})})]},el.id);})})]})});};export default RecipesList;","map":{"version":3,"sources":["/home/jason/projects/happy-recipe/client/src/components/RecipesList.jsx"],"names":["React","useEffect","useContext","RecipeFinder","useHistory","RecipesContext","StarRating","RecipesList","props","history","recipes","setRecipes","fetchData","get","response","data","recipeData","console","log","handleUpdate","e","id","stopPropagation","push","handleDelete","delete","filter","recipe","handleRecipeSelect","renderRating","rating","priceStyle","price","map","el","name","color","repeat"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from 'react'\nimport RecipeFinder from '../api/RecipeFinder'\nimport { useHistory } from 'react-router-dom'\nimport { RecipesContext } from '../context/appContext'\nimport StarRating from '../components/StarRating'\n\n\n\n\nconst RecipesList = (props) => {\n\n    let history = useHistory()\n    const { recipes, setRecipes } = useContext(RecipesContext)\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const response = await RecipeFinder.get('/')\n                setRecipes(response.data.data.recipeData)\n            } catch (err) {\n                console.log(err)\n            }\n        }\n        fetchData();\n\n\n    }, [setRecipes]);\n\n    const handleUpdate = async (e, id) => {\n        e.stopPropagation();\n        history.push(`/recipes/${id}/update`)\n    }\n\n    const handleDelete = async (e, id) => {\n        e.stopPropagation()\n        try {\n            await RecipeFinder.delete(`/${id}`)\n\n            setRecipes(recipes.filter(recipe => {\n                return recipe.id !== id\n            }))\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    const handleRecipeSelect = (id) => {\n        history.push(`/recipes/${id}/`)\n    }\n\n    const renderRating = (rating) => {\n        if (rating <= 0) {\n            return <span className=\"text-warning\">Not Yet Rated</span>\n        }\n        return (<>\n            <StarRating rating={rating} />\n        </>)\n    }\n\n    const priceStyle = (price) => {\n        if (price <= 2) {\n            return ('green'\n            )\n        } else if(price >2 && price <= 4){\n            return ('yellow')\n        } else {\n            return ('red')\n        }\n    }\n\n    return (\n        <div className=\"recipe-list\">\n            <table className=\"table table-hover table-dark\">\n                <thead>\n                    <tr className='bg-primary'>\n                        <th scope='col'>Recipe</th>\n                        <th scope='col'>Rating</th>\n                        <th scope='col'>Price</th>\n                        <th scope='col'>Edit</th>\n                        {/* <th scope='col'>Delete</th> */}\n                    </tr>\n                </thead>\n                <tbody>\n                    {recipes && recipes.map((el) => {\n                        return (\n                            <tr key={el.id} onClick={() => { handleRecipeSelect(el.id) }} className='table-row' >\n                                <td >{el.name}</td>\n                                <td>{renderRating(el.rating)}</td>\n                                <td style={{color: priceStyle(el.price)}}>{`$`.repeat(el.price)}</td>\n                                <td><button onClick={(e) => handleUpdate(e, el.id)} className='btn btn-warning'>Edit</button></td>\n                                {/* <td><button onClick={(e) => handleDelete(e, el.id)} className='btn btn-danger'>Delete</button></td> */}\n                            </tr>\n\n\n                        )\n                    })}\n                </tbody>\n            </table>\n\n        </div>\n    )\n}\n\nexport default RecipesList\n"]},"metadata":{},"sourceType":"module"}